package com.courtdata.court_data_fetcher.controller;

import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import com.courtdata.court_data_fetcher.entity.CaseDetails;
import com.courtdata.court_data_fetcher.service.CourtDataService;

import lombok.RequiredArgsConstructor;

@RestController
@RequestMapping("/api/cases")
@RequiredArgsConstructor
@CrossOrigin(origins = "http://localhost:3000") // âœ… Allow React app access
public class CourtDataController {

	private final CourtDataService courtDataService;

	@PostMapping("/fetch")
	public ResponseEntity<CaseDetails> fetchCase(@RequestParam String caseType, @RequestParam String caseNumber,
			@RequestParam String filingYear) {
		CaseDetails details = courtDataService.fetchCaseDetails(caseType, caseNumber, filingYear);
		return ResponseEntity.ok(details);
	}
}
